<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión</title>
    <link rel="stylesheet" href="CSS/estilos_login.css">
</head>
<body>
<header id="encabezado">
    <div id="izquierda">
        <a href="reservas.html" id="reserva">Reservas vuelo</a>
        <a href="reservas_hoteles.html" id="reserva">Reservas hotel</a>
    </div>
    <div id="centro">
        <a href="index.html" class="logo"><img src="LogoOficial.png" alt="Logo"></a>
    </div>
    <div id="derecha">
        <span id="estadoSesion">
            <a href="inicio_sesion.html" id="entrar">Entrar</a>
        </span>
    </div>
</header>

<section id="contenedorlogin">
    <h2 id="titulo">Inicio de sesión</h2>

    <form id="formularioLogin">
        <label for="correo" class="FormLabel">Correo electrónico</label>
        <input type="email" id="correo" class="FormInput" required>

        <label for="contraseña" class="FormLabel">Contraseña</label>
        <input type="password" id="contraseña" class="FormInput" required>

        <button type="submit" id="siguiente" class="boton">Siguiente</button>
        <button type="button" id="atras" class="boton" onclick="history.back()">Atrás</button>
    </form>
</section>

<footer id="PiePagina">
    Todos los derechos reservados DreamFlying © 2025
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const formulario = document.getElementById('formularioLogin');
        if (formulario) {
            formulario.addEventListener('submit', iniciarSesionPermisiva); 
        }

        verificarEstadoSesion();
    });

    function iniciarSesionPermisiva(e) {
        e.preventDefault();

        const correoInput = document.getElementById('correo').value;
        const contraseñaInput = document.getElementById('contraseña').value;

        if (correoInput && contraseñaInput) {
            
            sessionStorage.setItem('usuarioLogeado', correoInput);
            sessionStorage.setItem('saldoUsuario', '5000.00');
            
            alert('¡Inicio de sesión exitoso!');
            window.location.href = 'index.html'; 

        } else {
            alert('Por favor, ingresa un correo y una contraseña.');
        }
    }


    function verificarEstadoSesion() {
        const usuarioLogeado = sessionStorage.getItem('usuarioLogeado');
        const estadoSesionElement = document.getElementById('estadoSesion');

        if (estadoSesionElement && usuarioLogeado) {
            
            const nombreSpan = document.createElement('span');
            nombreSpan.textContent = usuarioLogeado;
            nombreSpan.style.fontWeight = 'bold';
            nombreSpan.style.color = '#1d4e89'; 

            const cerrarSesionLink = document.createElement('a');
           cerrarSesionLink.href = '#';
            cerrarSesionLink.textContent = ' (Cerrar Sesión)';
            cerrarSesionLink.style.marginLeft = '10px';
            cerrarSesionLink.style.color = '#CC0000';
            cerrarSesionLink.style.textDecoration = 'none';
            
            cerrarSesionLink.onclick = function(e) {
                e.preventDefault(); 
                sessionStorage.clear(); 
                localStorage.removeItem('historialReservas'); 
                localStorage.removeItem('historialReservasHoteles'); 
                
                alert('Sesión cerrada. Serás redirigido.');
                window.location.href = 'index.html'; 
            };

            estadoSesionElement.innerHTML = '';
            estadoSesionElement.appendChild(nombreSpan);
            estadoSesionElement.appendChild(cerrarSesionLink);
        } else if (estadoSesionElement) {
            estadoSesionElement.innerHTML = '<a href="inicio_sesion.html" id="entrar">Entrar</a>';
        }
    }
</script>
</body>
</html>